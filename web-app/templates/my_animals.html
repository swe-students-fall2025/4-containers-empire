<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

  <title>My Animals</title>
</head>

<body>
  <nav>
    <h1>Who's That Animal?</h1>
    <div>
      <a href="{{ url_for('home') }}">Home</a>
      <a href="{{ url_for('upload') }}">Upload more photos</a>
      <a href="{{ url_for('logout') }}">Log out</a>
    </div>
  </nav>

  <main>
    <h1>My Animals</h1>

    {% if observations %}
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px;">
      {% for obs in observations %}
      <div style="border: 1px solid #ddd; padding: 10px; border-radius: 8px;">
        <!--FIXED: Removed str() call -->
        <a href="{{ url_for('your_animal', obs_id=obs._id) }}">
          <img src="{{ url_for('uploaded_file', filename=obs.filename) }}"
            style="max-width: 100%; height: auto; border-radius: 4px;" alt="Animal photo">
        </a>

        {% if obs.status == "done" %}
        <p><strong>{{ obs.animal_type }}</strong></p>
        <p>Confidence: {{ (obs.confidence * 100) | round(1) }}%</p>
        {% elif obs.status == "pending" %}
        <p><em>Processing...</em></p>
        {% elif obs.status == "failed" %}
        <p><em>Failed</em></p>
        {% else %}
        <p><em>{{ obs.status }}</em></p>
        {% endif %}
      </div>
      {% endfor %}
    </div>
    {% else %}
    <p>You haven't uploaded any observations yet.</p>
    <p><a href="{{ url_for('upload') }}">Upload your first animal photo!</a></p>
    {% endif %}
  </main>
</body>

</html>